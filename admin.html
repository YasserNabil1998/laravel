<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحكم الإدمن - نفاذ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <style>
        .admin-layout { display: grid; grid-template-columns: 280px 1fr; min-height: 100vh; }
        .sidebar { background: #1e293b; color: #fff; padding: 20px; }
        .sidebar-header { text-align: center; margin-bottom: 30px; }
        .sidebar-header h3 { color: #20c997; font-weight: 700; }
        .nav-menu { list-style: none; padding: 0; margin: 0; }
        .nav-item { margin-bottom: 5px; }
        .nav-link { display: flex; align-items: center; gap: 12px; padding: 12px 16px; color: #cbd5e1; text-decoration: none; border-radius: 8px; transition: all 0.3s; }
        .nav-link:hover, .nav-link.active { background: #20c997; color: #fff; }
        .main-content { background: #f8fafc; padding: 30px; }
        .content-header { background: #fff; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 30px; }
        .stat-card { background: #fff; border-radius: 12px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .stat-icon { width: 50px; height: 50px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 24px; margin-bottom: 15px; }
        .stat-number { font-size: 32px; font-weight: 700; margin-bottom: 5px; }
        .stat-label { color: #6c757d; font-size: 14px; }
        .content-section { background: #fff; border-radius: 12px; padding: 20px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .section-header { display: flex; justify-content: between; align-items: center; margin-bottom: 20px; }
        .btn-add { background: #20c997; color: #fff; border: none; padding: 10px 20px; border-radius: 8px; font-weight: 600; }
        .table { margin-bottom: 0; }
        .table th { border-top: none; font-weight: 600; color: #495057; }
        .action-btn { padding: 6px 12px; border-radius: 6px; border: none; margin-right: 5px; font-size: 12px; }
        .btn-edit { background: #ffc107; color: #000; }
        .btn-delete { background: #dc3545; color: #fff; }
        .btn-view { background: #17a2b8; color: #fff; }
        @media (max-width: 768px) { .admin-layout { grid-template-columns: 1fr; } .sidebar { display: none; } }
    </style>
</head>
<body>
    <div class="admin-layout">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h3><i class="fas fa-shield-alt"></i> نفاذ</h3>
                <p>لوحة تحكم الإدمن</p>
            </div>
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="#dashboard" class="nav-link active" data-section="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        لوحة التحكم
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#students" class="nav-link" data-section="students">
                        <i class="fas fa-users"></i>
                        إدارة الطلاب
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#questions" class="nav-link" data-section="questions">
                        <i class="fas fa-question-circle"></i>
                        إدارة الأسئلة
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#exams" class="nav-link" data-section="exams">
                        <i class="fas fa-file-alt"></i>
                        إدارة الاختبارات
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#reports" class="nav-link" data-section="reports">
                        <i class="fas fa-chart-bar"></i>
                        التقارير
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#settings" class="nav-link" data-section="settings">
                        <i class="fas fa-cog"></i>
                        الإعدادات
                    </a>
                </li>
                <li class="nav-item mt-4">
                    <a href="index.html" class="nav-link">
                        <i class="fas fa-sign-out-alt"></i>
                        تسجيل الخروج
                    </a>
                </li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Section -->
            <div id="dashboard" class="content-section">
                <div class="content-header">
                    <h2><i class="fas fa-tachometer-alt"></i> لوحة التحكم</h2>
                    <p>مرحباً بك في لوحة تحكم نفاذ</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #e3f2fd; color: #1976d2;">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-number">1,247</div>
                        <div class="stat-label">إجمالي الطلاب</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #f3e5f5; color: #7b1fa2;">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <div class="stat-number">856</div>
                        <div class="stat-label">الأسئلة المتاحة</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #e8f5e8; color: #388e3c;">
                            <i class="fas fa-file-alt"></i>
                        </div>
                        <div class="stat-number">24</div>
                        <div class="stat-label">الاختبارات النشطة</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: #fff3e0; color: #f57c00;">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="stat-number">89%</div>
                        <div class="stat-label">معدل النجاح</div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6">
                        <div class="content-section">
                            <h4>آخر الاختبارات المضافة</h4>
                            <div class="table-responsive">
                                <table class="table">
                                    <tbody>
                                        <tr>
                                            <td>اختبار الرياضيات</td>
                                            <td><span class="badge bg-success">نشط</span></td>
                                        </tr>
                                        <tr>
                                            <td>اختبار اللغة العربية</td>
                                            <td><span class="badge bg-warning">قيد المراجعة</span></td>
                                        </tr>
                                        <tr>
                                            <td>اختبار العلوم</td>
                                            <td><span class="badge bg-success">نشط</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="content-section">
                            <h4>آخر الطلاب المسجلين</h4>
                            <div class="table-responsive">
                                <table class="table">
                                    <tbody>
                                        <tr>
                                            <td>أحمد محمد</td>
                                            <td>2024-01-15</td>
                                        </tr>
                                        <tr>
                                            <td>فاطمة علي</td>
                                            <td>2024-01-14</td>
                                        </tr>
                                        <tr>
                                            <td>محمد حسن</td>
                                            <td>2024-01-13</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Students Section -->
            <div id="students" class="content-section" style="display: none;">
                <div class="section-header">
                    <h2><i class="fas fa-users"></i> إدارة الطلاب</h2>
                    <button class="btn-add" onclick="showAddStudentModal()">
                        <i class="fas fa-plus"></i> إضافة طالب جديد
                    </button>
                </div>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>الاسم</th>
                                <th>رقم السجل المدني</th>
                                <th>البريد الإلكتروني</th>
                                <th>تاريخ التسجيل</th>
                                <th>الحالة</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>أحمد محمد علي</td>
                                <td>1234567890</td>
                                <td>ahmed@example.com</td>
                                <td>2024-01-15</td>
                                <td><span class="badge bg-success">نشط</span></td>
                                <td>
                                    <button class="action-btn btn-view" onclick="viewStudent(1)"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn btn-edit" onclick="editStudent(1)"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn btn-delete" onclick="deleteStudent(1)"><i class="fas fa-trash"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td>فاطمة علي حسن</td>
                                <td>0987654321</td>
                                <td>fatima@example.com</td>
                                <td>2024-01-14</td>
                                <td><span class="badge bg-success">نشط</span></td>
                                <td>
                                    <button class="action-btn btn-view" onclick="viewStudent(2)"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn btn-edit" onclick="editStudent(2)"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn btn-delete" onclick="deleteStudent(2)"><i class="fas fa-trash"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Questions Section -->
            <div id="questions" class="content-section" style="display: none;">
                <div class="section-header">
                    <h2><i class="fas fa-question-circle"></i> إدارة الأسئلة</h2>
                    <button class="btn-add" onclick="showAddQuestionModal()">
                        <i class="fas fa-plus"></i> إضافة سؤال جديد
                    </button>
                </div>
                
                <!-- Filters -->
                <div class="filters-section mb-3">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <label class="form-label">فلترة حسب المادة</label>
                            <select class="form-select" id="subjectFilter" onchange="filterQuestions()">
                                <option value="">جميع المواد</option>
                                <option value="math">الرياضيات</option>
                                <option value="arabic">اللغة العربية</option>
                                <option value="english">اللغة الإنجليزية</option>
                                <option value="science">العلوم</option>
                                <option value="geography">الجغرافيا</option>
                                <option value="history">التاريخ</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">فلترة حسب الصعوبة</label>
                            <select class="form-select" id="difficultyFilter" onchange="filterQuestions()">
                                <option value="">جميع المستويات</option>
                                <option value="easy">سهل ⭐</option>
                                <option value="medium">متوسط ⭐⭐</option>
                                <option value="hard">صعب ⭐⭐⭐</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">فلترة حسب النوع</label>
                            <select class="form-select" id="typeFilter" onchange="filterQuestions()">
                                <option value="">جميع الأنواع</option>
                                <option value="mcq">اختيار من متعدد</option>
                                <option value="true-false">صح أو خطأ</option>
                                <option value="matching">تطابق</option>
                                <option value="essay">مقالي</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label">فلترة حسب الحالة</label>
                            <select class="form-select" id="statusFilter" onchange="filterQuestions()">
                                <option value="">جميع الحالات</option>
                                <option value="active">نشط</option>
                                <option value="inactive">غير نشط</option>
                                <option value="pending">قيد المراجعة</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>السؤال</th>
                                <th>المادة</th>
                                <th>مستوى الصعوبة</th>
                                <th>نوع السؤال</th>
                                <th>الحالة</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-subject="math" data-difficulty="medium" data-type="mcq" data-status="active">
                                <td>كم عدد الزوايا الداخلية في الشكل الخماسي؟</td>
                                <td>الرياضيات</td>
                                <td><span class="badge bg-warning">متوسط ⭐⭐</span></td>
                                <td>اختيار من متعدد</td>
                                <td><span class="badge bg-success">نشط</span></td>
                                <td>
                                    <button class="action-btn btn-view" onclick="viewQuestion(1)"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn btn-edit" onclick="editQuestion(1)"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn btn-delete" onclick="deleteQuestion(1)"><i class="fas fa-trash"></i></button>
                                </td>
                            </tr>
                            <tr data-subject="geography" data-difficulty="easy" data-type="mcq" data-status="active">
                                <td>ما عاصمة المملكة العربية السعودية؟</td>
                                <td>الجغرافيا</td>
                                <td><span class="badge bg-success">سهل ⭐</span></td>
                                <td>اختيار من متعدد</td>
                                <td><span class="badge bg-success">نشط</span></td>
                                <td>
                                    <button class="action-btn btn-view" onclick="viewQuestion(2)"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn btn-edit" onclick="editQuestion(2)"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn btn-delete" onclick="deleteQuestion(2)"><i class="fas fa-trash"></i></button>
                                </td>
                            </tr>
                            <tr data-subject="science" data-difficulty="hard" data-type="mcq" data-status="active">
                                <td>ما هو العنصر الكيميائي الذي يرمز له بالرمز Fe؟</td>
                                <td>العلوم</td>
                                <td><span class="badge bg-danger">صعب ⭐⭐⭐</span></td>
                                <td>اختيار من متعدد</td>
                                <td><span class="badge bg-success">نشط</span></td>
                                <td>
                                    <button class="action-btn btn-view" onclick="viewQuestion(3)"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn btn-edit" onclick="editQuestion(3)"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn btn-delete" onclick="deleteQuestion(3)"><i class="fas fa-trash"></i></button>
                                </td>
                            </tr>
                            <tr data-subject="arabic" data-difficulty="easy" data-type="true-false" data-status="active">
                                <td>هل كلمة "مدرسة" اسم مفرد؟</td>
                                <td>اللغة العربية</td>
                                <td><span class="badge bg-success">سهل ⭐</span></td>
                                <td>صح أو خطأ</td>
                                <td><span class="badge bg-success">نشط</span></td>
                                <td>
                                    <button class="action-btn btn-view" onclick="viewQuestion(4)"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn btn-edit" onclick="editQuestion(4)"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn btn-delete" onclick="deleteQuestion(4)"><i class="fas fa-trash"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Exams Section -->
            <div id="exams" class="content-section" style="display: none;">
                <div class="section-header">
                    <h2><i class="fas fa-file-alt"></i> إدارة الاختبارات</h2>
                    <button class="btn-add" onclick="showAddExamModal()">
                        <i class="fas fa-plus"></i> إنشاء اختبار جديد
                    </button>
                </div>
                <div class="table-responsive">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>اسم الاختبار</th>
                                <th>المادة</th>
                                <th>عدد الأسئلة</th>
                                <th>المدة</th>
                                <th>تاريخ الإنشاء</th>
                                <th>الحالة</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>اختبار الرياضيات الشامل</td>
                                <td>الرياضيات</td>
                                <td>25</td>
                                <td>60 دقيقة</td>
                                <td>2024-01-10</td>
                                <td><span class="badge bg-success">نشط</span></td>
                                <td>
                                    <button class="action-btn btn-view"><i class="fas fa-eye"></i></button>
                                    <button class="action-btn btn-edit"><i class="fas fa-edit"></i></button>
                                    <button class="action-btn btn-delete"><i class="fas fa-trash"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Reports Section -->
            <div id="reports" class="content-section" style="display: none;">
                <div class="content-header">
                    <h2><i class="fas fa-chart-bar"></i> التقارير</h2>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="content-section">
                            <h4>إحصائيات الطلاب</h4>
                            <canvas id="studentsChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="content-section">
                            <h4>معدلات النجاح</h4>
                            <canvas id="successChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settings" class="content-section" style="display: none;">
                <div class="content-header">
                    <h2><i class="fas fa-cog"></i> الإعدادات</h2>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="content-section">
                            <h4>إعدادات النظام</h4>
                            <form>
                                <div class="mb-3">
                                    <label class="form-label">اسم النظام</label>
                                    <input type="text" class="form-control" value="نفاذ">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">البريد الإلكتروني للدعم</label>
                                    <input type="email" class="form-control" value="support@nafath.sa">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">عدد الأسئلة في الاختبار الافتراضي</label>
                                    <input type="number" class="form-control" value="25">
                                </div>
                                <button type="submit" class="btn-add">حفظ الإعدادات</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Navigation
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove active class from all links
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                
                // Add active class to clicked link
                this.classList.add('active');
                
                // Hide all sections
                document.querySelectorAll('.content-section').forEach(section => {
                    section.style.display = 'none';
                });
                
                // Show target section
                const targetSection = this.getAttribute('data-section');
                if (targetSection) {
                    document.getElementById(targetSection).style.display = 'block';
                }
            });
        });

        // Modal functions
        function showAddStudentModal() {
            window.location.href = 'admin-student.html';
        }

        function showAddQuestionModal() {
            window.location.href = 'admin-question.html';
        }

        function showAddExamModal() {
            alert('سيتم إضافة نافذة إنشاء اختبار جديد');
        }

        // Student management functions
        function viewStudent(id) {
            alert(`عرض بيانات الطالب رقم ${id}`);
        }

        function editStudent(id) {
            window.location.href = `admin-student.html?id=${id}`;
        }

        function deleteStudent(id) {
            if (confirm('هل أنت متأكد من حذف هذا الطالب؟')) {
                alert(`تم حذف الطالب رقم ${id}`);
            }
        }

        // Question management functions
        function viewQuestion(id) {
            alert(`عرض السؤال رقم ${id}`);
        }

        function editQuestion(id) {
            window.location.href = `admin-question.html?id=${id}`;
        }

        function deleteQuestion(id) {
            if (confirm('هل أنت متأكد من حذف هذا السؤال؟')) {
                alert(`تم حذف السؤال رقم ${id}`);
            }
        }

        // Filter questions function
        function filterQuestions() {
            const subjectFilter = document.getElementById('subjectFilter').value;
            const difficultyFilter = document.getElementById('difficultyFilter').value;
            const typeFilter = document.getElementById('typeFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;

            const rows = document.querySelectorAll('#questions tbody tr');

            rows.forEach(row => {
                const subject = row.getAttribute('data-subject');
                const difficulty = row.getAttribute('data-difficulty');
                const type = row.getAttribute('data-type');
                const status = row.getAttribute('data-status');

                let show = true;

                if (subjectFilter && subject !== subjectFilter) show = false;
                if (difficultyFilter && difficulty !== difficultyFilter) show = false;
                if (typeFilter && type !== typeFilter) show = false;
                if (statusFilter && status !== statusFilter) show = false;

                row.style.display = show ? '' : 'none';
            });

            // Update results count
            const visibleRows = document.querySelectorAll('#questions tbody tr:not([style*="display: none"])');
            console.log(`تم عرض ${visibleRows.length} سؤال من أصل ${rows.length}`);
        }
    </script>
</body>
</html>
